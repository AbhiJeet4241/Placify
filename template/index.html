<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Placify - Home</title>
    <!-- Custom CSS (Replacing Tailwind) -->
    <link rel="stylesheet" href="/static/style.css">
    <!-- Load Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

    <!-- =========== HEADER =========== -->
    <header class="app-header">
        <nav class="container flex justify-between items-center py-4">
            <div class="logo-text">Placify</div>
            <!-- Simple Single Page Header -->
            <div class="sub-header-text">AI Placement Readiness</div>
        </nav>
    </header>

    <!-- =========== MAIN CONTENT =========== -->
    <main class="container py-6">

        <!-- 
        ==================================================
        SECTION 1: ASSESSMENT MODE SELECTION
        ==================================================
        -->
        <section id="mode-selection" class="text-center my-16">
            <h1 class="mb-4">Welcome, Student!</h1>
            <p class="mb-12 text-lg">Select your assessment mode to get a personalized, AI-driven
                placement report.</p>

            <div class="feature-grid md-grid-cols-3">
                <!-- Fast Mode Card -->
                <div class="card-base card-hover p-8">
                    <div class="text-blue-600 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon-lg" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                    </div>
                    <h2 class="mb-3">Fast Mode</h2>
                    <p class="mb-6">10 quick MCQs. Get a baseline readiness score in 5 minutes.</p>
                    <button onclick="startAssessment('fast')" class="btn btn-primary w-full">Start
                        Fast Assessment</button>
                </div>

                <!-- Balanced Mode Card -->
                <div class="card-base card-hover p-8">
                    <div class="text-blue-600 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon-lg" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 0l-6 2m6-2l6 2" />
                        </svg>
                    </div>
                    <h2 class="mb-3">Balanced Mode</h2>
                    <p class="mb-6">20 MCQs & short answers. Deeper analysis of your skills.</p>
                    <button onclick="startAssessment('balanced')" class="btn btn-primary w-full bg-blue-700">Start
                        Balanced Assessment</button>
                </div>

                <!-- Detailed Mode Card -->
                <div class="card-base card-hover p-8">
                    <div class="text-blue-600 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon-lg" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    </div>
                    <h2 class="mb-3">Detailed Mode</h2>
                    <p class="mb-6">30+ questions. Upload your resume for a full RAG-driven analysis.</p>
                    <button onclick="startAssessment('detailed')" class="btn btn-primary w-full">Start
                        Detailed Assessment</button>
                </div>
            </div>
        </section>

        <!-- 
        ==================================================
        SECTION 2: RESUME UPLOADER
        ==================================================
        -->
        <section id="resume-section" class="card-base my-16 mx-auto md-p-12 max-w-4xl p-8">
            <h2 class="text-center mb-8">Upload Resume</h2>
            <!-- File Upload Area -->
            <div class="upload-area flex flex-col items-center justify-center p-10 mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon-lg text-gray-400 mb-4" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                </svg>
                <p class="mb-2">Drag & drop your resume (PDF/Docx)</p>
                <input type="file" id="resume-upload" class="hidden" accept=".pdf,.doc,.docx" />
                <button onclick="document.getElementById('resume-upload').click()" class="btn-link">Browse
                    Files</button>
            </div>

            <div class="text-center mt-6">
                <button onclick="uploadResume()" class="btn btn-primary mr-4">Upload
                    Resume</button>
                <button onclick="analyzeResumeOnly()" class="btn btn-secondary">Analyze Resume Only</button>
            </div>
            <p class="mt-4 text-center text-xs text-gray-400">Privacy-First: Your resume
                is optional and is not stored
                without permission. Saved to web_data/resume.</p>
        </section>

        <!-- 
        ==================================================
        SECTION 3: DETAILED ASSESSMENT / REPORT
        ==================================================
        -->
        <section id="detailed-assessment" class="card-base my-16 mx-auto hidden md-p-12 max-w-4xl p-8">
            <h2 class="text-center mb-8">Personalized Assessment</h2>

            <form id="assessment-form" onsubmit="event.preventDefault(); submitAssessment();">
                <div id="questions-container" class="space-y-6">
                    <!-- Questions will be loaded here dynamically -->
                    <div class="text-center text-gray-500">Loading questions...</div>
                </div>

                <!-- Navigation -->
                <div class="flex justify-between mt-10">
                    <button type="button" onclick="location.reload()" class="btn btn-gray">Cancel</button>
                    <button type="submit" class="btn btn-primary">Submit
                        Assessment</button>
                </div>
            </form>
        </section>


        <!-- 
        ==================================================
        SECTION 3.5: GENERATED REPORT (Part of Assessment flow)
        ==================================================
        -->
        <section id="report" class="card-base my-16 hidden md-p-12 p-8">
            <h2 class="text-center mb-4">Your Personalized Career Report</h2>
            <div class="text-center mb-10">
                <a href="/api/report/pdf" download="Placement_Report.pdf" class="btn btn-success">
                    Download PDF Report
                </a>
            </div>

            <div class="feature-grid md-grid-cols-3">
                <!-- Left Column: Score and Stats -->
                <div class="md-col-span-1 space-y-6">
                    <div class="text-center bg-gray-50 p-6 rounded-md">
                        <h3 class="mb-4 text-gray-600">Readiness Score</h3>
                        <div class="progress-circle mx-auto">
                            <span id="readiness-score-display">0%</span>
                        </div>
                        <p class="mt-4">Based on your answers and analysis.</p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-md">
                        <h3 class="mb-4">Key Strengths</h3>
                        <ul class="list-disc list-inside space-y-2 text-green-700">
                            <!-- Dynamic Strengths -->
                        </ul>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-md">
                        <h3 class="mb-4">Improvement Gaps</h3>
                        <ul class="list-disc list-inside space-y-2 text-red-700">
                            <!-- Dynamic Gaps -->
                        </ul>
                    </div>
                </div>

                <!-- Right Column: Action Plan and Jobs -->
                <div class="md-col-span-2 space-y-6">
                    <div class="bg-gray-50 p-6 rounded-md">
                        <h3 class="mb-4 text-lg">Your AI-Generated Action Plan</h3>
                        <ol class="list-decimal list-inside space-y-3">
                            <!-- Dynamic Action Plan -->
                        </ol>
                    </div>

                    <div class="bg-gray-50 p-6 rounded-md">
                        <h3 class="mb-4 text-lg">Top Job Recommendations (RAG-Powered)</h3>
                        <div class="space-y-4">
                            <!-- Dynamic Jobs -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 
        ==================================================
        SECTION 4: DRAFT EMAIL BOX
        ==================================================
        -->
        <section id="email-drafts" class="card-base my-16 mx-auto md-p-12 max-w-4xl p-8">
            <h2 class="text-center mb-8">Generated Communication Drafts</h2>
            <div class="bg-gray-50 p-6 rounded-md">
                <div class="border-gray-200 rounded-md mb-2 p-4 bg-white">
                    <h4 class="mb-2 font-semibold text-blue-700">Draft: Recruiter Email</h4>
                    <textarea id="email-draft-output" class="textarea-input"
                        placeholder="Select a job above to generate a draft email..." readonly></textarea>
                </div>
                <!-- Copy Button -->
                <div class="text-right">
                    <button onclick="copyDraftText()" class="btn btn-primary flex-center-gap">
                        <svg xmlns="http://www.w3.org/2000/svg" style="height: 1.25rem; width: 1.25rem;" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                        </svg>
                        Copy to Clipboard
                    </button>
                    <p id="copy-feedback" class="hidden mt-2 text-green-600 text-xs text-right">
                        Copied to clipboard!</p>
                </div>
            </div>
        </section>

    </main>

    <!-- =========== FOOTER =========== -->
    <footer class="text-center mt-16 bg-gray-800 p-6 text-gray-400">
        <p class="text-gray-400">&copy; 2025 Placify</p>
        <p class="text-xs text-gray-400">Acropolis Institute of Technology and Research, Indore
        </p>
    </footer>

    <script src="script.js?v=1.1"></script>
</body>

</html>